<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `propagation` mod in crate `opentelemetry`."><meta name="keywords" content="rust, rustlang, rust-lang, propagation"><title>opentelemetry::api::context::propagation - Rust</title><link rel="stylesheet" type="text/css" href="../../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../../dark.css"><link rel="stylesheet" type="text/css" href="../../../../light.css" id="themeStyle"><script src="../../../../storage.js"></script><noscript><link rel="stylesheet" href="../../../../noscript.css"></noscript><link rel="shortcut icon" href="../../../../favicon.ico"><style type="text/css">#crate-search{background-image:url("../../../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../../../opentelemetry/index.html'><div class='logo-container'><img src='../../../../rust-logo.png' alt='logo'></div></a><p class='location'>Module propagation</p><div class="sidebar-elems"><div class="block items"><ul><li><a href="#modules">Modules</a></li><li><a href="#traits">Traits</a></li></ul></div><p class='location'><a href='../../../index.html'>opentelemetry</a>::<wbr><a href='../../index.html'>api</a>::<wbr><a href='../index.html'>context</a></p><script>window.sidebarCurrent = {name: 'propagation', ty: 'mod', relpath: '../'};</script><script defer src="../sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../../../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../../../../settings.html"><img src="../../../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../../../../src/opentelemetry/api/context/propagation/mod.rs.html#1-188' title='goto source code'>[src]</a></span><span class='in-band'>Module <a href='../../../index.html'>opentelemetry</a>::<wbr><a href='../../index.html'>api</a>::<wbr><a href='../index.html'>context</a>::<wbr><a class="mod" href=''>propagation</a></span></h1><div class='docblock'><h1 id="opentelemetry-propagator-interface" class="section-header"><a href="#opentelemetry-propagator-interface">OpenTelemetry Propagator interface</a></h1>
<p>Propagators API consists of two main formats:</p>
<ul>
<li><code>BinaryFormat</code> is used to serialize and deserialize a value
into a binary representation.</li>
<li><code>HttpTextFormat</code> is used to inject and extract a value as
text into carriers that travel in-band across process boundaries.</li>
</ul>
<p>Deserializing must set <code>is_remote</code> to true on the returned
<code>SpanContext</code>.</p>
<h2 id="binary-format" class="section-header"><a href="#binary-format">Binary Format</a></h2>
<p><code>BinaryFormat</code> is a formatter to serialize and deserialize a value
into a binary format.</p>
<p><code>BinaryFormat</code> MUST expose the APIs that serializes values into bytes,
and deserializes values from bytes.</p>
<h3 id="tobytes" class="section-header"><a href="#tobytes">ToBytes</a></h3>
<p>Serializes the given value into the on-the-wire representation.</p>
<p>Required arguments:</p>
<ul>
<li>the value to serialize, can be <code>SpanContext</code> or <code>DistributedContext</code>.</li>
</ul>
<p>Returns the on-the-wire byte representation of the value.</p>
<h3 id="frombytes" class="section-header"><a href="#frombytes">FromBytes</a></h3>
<p>Creates a value from the given on-the-wire encoded representation.</p>
<p>If the value could not be parsed, the underlying implementation
SHOULD decide to return ether an empty value, an invalid value, or
a valid value.</p>
<p>Required arguments:</p>
<ul>
<li>on-the-wire byte representation of the value.</li>
</ul>
<p>Returns a value deserialized from bytes.</p>
<h2 id="http-text-format" class="section-header"><a href="#http-text-format">HTTP Text Format</a></h2>
<p><code>HttpTextFormat</code> is a formatter that injects and extracts a value
as text into carriers that travel in-band across process boundaries.</p>
<p>Encoding is expected to conform to the HTTP Header Field semantics.
Values are often encoded as RPC/HTTP request headers.</p>
<p>The carrier of propagated data on both the client (injector) and
server (extractor) side is usually an http request. Propagation is
usually implemented via library-specific request interceptors, where
the client-side injects values and the server-side extracts them.</p>
<p><code>HttpTextFormat</code> MUST expose the APIs that injects values into carriers,
and extracts values from carriers.</p>
<h3 id="fields" class="section-header"><a href="#fields">Fields</a></h3>
<p>The propagation fields defined. If your carrier is reused, you should
delete the fields here before calling <code>inject</code>.</p>
<p>For example, if the carrier is a single-use or immutable request object,
you don't need to clear fields as they couldn't have been set before.
If it is a mutable, retryable object, successive calls should clear
these fields first.</p>
<p>The use cases of this are:</p>
<ul>
<li>allow pre-allocation of fields, especially in systems like gRPC
Metadata</li>
<li>allow a single-pass over an iterator</li>
</ul>
<p>Returns list of fields that will be used by this formatter.</p>
<h3 id="inject" class="section-header"><a href="#inject">Inject</a></h3>
<p>Injects the value downstream. For example, as http headers.</p>
<p>Required arguments:</p>
<ul>
<li>the <code>SpanContext</code> to be injected.</li>
<li>the carrier that holds propagation fields. For example, an outgoing
message or http request.</li>
<li>the <code>Setter</code> invoked for each propagation key to add or remove.</li>
</ul>
<h4 id="setter-argument" class="section-header"><a href="#setter-argument">Setter argument</a></h4>
<p>Setter is an argument in <code>Inject</code> that puts value into given field.</p>
<p><code>Setter</code> allows a <code>HttpTextFormat</code> to set propagated fields into a
carrier.</p>
<p><code>Setter</code> MUST be stateless and allowed to be saved as a constant to
avoid runtime allocations. One of the ways to implement it is <code>Setter</code>
class with <code>Put</code> method as described below.</p>
<h5 id="put" class="section-header"><a href="#put">Put</a></h5>
<p>Replaces a propagated field with the given value.</p>
<p>Required arguments:</p>
<ul>
<li>the carrier holds propagation fields. For example, an outgoing message
or http request.</li>
<li>the key of the field.</li>
<li>the value of the field.</li>
</ul>
<p>The implementation SHOULD preserve casing (e.g. it should not transform
<code>Content-Type</code> to <code>content-type</code>) if the used protocol is case insensitive,
otherwise it MUST preserve casing.</p>
<h3 id="extract" class="section-header"><a href="#extract">Extract</a></h3>
<p>Extracts the value from upstream. For example, as http headers.</p>
<p>If the value could not be parsed, the underlying implementation will
decide to return an object representing either an empty value, an invalid
value, or a valid value.</p>
<p>Required arguments:</p>
<ul>
<li>the carrier holds propagation fields. For example, an outgoing message
or http request.</li>
<li>the instance of <code>Getter</code> invoked for each propagation key to get.</li>
</ul>
<p>Returns the non-null extracted value.</p>
<h4 id="getter-argument" class="section-header"><a href="#getter-argument">Getter argument</a></h4>
<p>Getter is an argument in <code>Extract</code> that get value from given field</p>
<p><code>Getter</code> allows a <code>HttpTextFormat</code> to read propagated fields from a
carrier.</p>
<p><code>Getter</code> MUST be stateless and allowed to be saved as a constant to avoid
runtime allocations. One of the ways to implement it is <code>Getter</code> class
with <code>Get</code> method as described below.</p>
<h5 id="get" class="section-header"><a href="#get">Get</a></h5>
<p>The Get function MUST return the first value of the given propagation
key or return <code>None</code> if the key doesn't exist.</p>
<p>Required arguments:</p>
<ul>
<li>the carrier of propagation fields, such as an HTTP request.</li>
<li>the key of the field.</li>
</ul>
<p>The <code>get</code> function is responsible for handling case sensitivity. If
the getter is intended to work with an HTTP request object, the getter
MUST be case insensitive. To improve compatibility with other text-based
protocols, text format implementations MUST ensure to always use the
canonical casing for their attributes. NOTE: Canonical casing for HTTP
headers is usually title case (e.g. <code>Content-Type</code> instead of <code>content-type</code>).</p>
</div><h2 id='modules' class='section-header'><a href="#modules">Modules</a></h2>
<table><tr class='module-item'><td><a class="mod" href="binary_propagator/index.html" title='opentelemetry::api::context::propagation::binary_propagator mod'>binary_propagator</a></td><td class='docblock-short'><p>Binary Propagator</p>
</td></tr><tr class='module-item'><td><a class="mod" href="composite_propagator/index.html" title='opentelemetry::api::context::propagation::composite_propagator mod'>composite_propagator</a></td><td class='docblock-short'><p>Composite Propagator</p>
</td></tr><tr class='module-item'><td><a class="mod" href="text_propagator/index.html" title='opentelemetry::api::context::propagation::text_propagator mod'>text_propagator</a></td><td class='docblock-short'><p>Text Propagator</p>
</td></tr></table><h2 id='traits' class='section-header'><a href="#traits">Traits</a></h2>
<table><tr class='module-item'><td><a class="trait" href="trait.Carrier.html" title='opentelemetry::api::context::propagation::Carrier trait'>Carrier</a></td><td class='docblock-short'><p>Carriers provide an interface for adding and removing fields from an
underlying struct like <code>HashMap</code>.</p>
</td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../../../../";window.currentCrate = "opentelemetry";</script><script src="../../../../aliases.js"></script><script src="../../../../main.js"></script><script defer src="../../../../search-index.js"></script></body></html>